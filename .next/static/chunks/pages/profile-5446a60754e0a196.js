(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{31993:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return n(73833)}])},73833:function(e,r,n){"use strict";n.r(r);var t=n(34051),a=n.n(t),i=n(85893),o=n(9669),s=n.n(o),l=n(5152),u=n(11163),c=(n(41664),n(25675)),d=n(67294),f=n(41749),m=n(18463),h=n(62822),p=n(50998),v=n(22318),x=n(81475),w=n(282),j=n(47820),g=n(61776),b=n(19629),P=n(87536),Z=n(73124),y=n(36808),_=n.n(y);function k(e,r,n,t,a,i,o){try{var s=e[i](o),l=s.value}catch(u){return void n(u)}s.done?r(l):Promise.resolve(l).then(t,a)}function E(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function O(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){E(e,r,n[r])}))}return e}function N(){var e=(0,d.useContext)(j.K),r=e.state,n=e.dispatch,t=(0,P.cI)(),o=t.handleSubmit,l=t.control,y=t.formState.errors,E=t.setValue,N=(0,Z.Ds)(),S=N.enqueueSnackbar,C=N.closeSnackbar,T=(0,u.useRouter)(),W=(0,b.Z)(),B=r.userInfo;(0,d.useEffect)((function(){if(!B)return T.push("/login");E("name",B.name),E("email",B.email)}),[T,B,E]);var q=function(){var e,r=(e=a().mark((function e(r){var t,i,o,l,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.name,i=r.email,o=r.password,l=r.confirmPassword,C(),o===l){e.next=5;break}return S("Passwords don't match",{variant:"error"}),e.abrupt("return");case 5:return e.prev=5,e.next=8,s().put("/api/users/profile",{name:t,email:i,password:o},{headers:{authorization:"Bearer ".concat(B.token)}});case 8:u=e.sent.data,n({type:"USER_LOGIN",payload:u}),_().set("userInfo",u),S("Profile Updated Successfully",{variant:"success"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),S(e.t0,{variant:"error"});case 17:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function o(e){k(i,t,a,o,s,"next",e)}function s(e){k(i,t,a,o,s,"throw",e)}o(void 0)}))});return function(e){return r.apply(this,arguments)}}();return(0,i.jsx)(g.Z,{children:(0,i.jsxs)(f.Z,{container:!0,spacing:1,children:[(0,i.jsx)(f.Z,{item:!0,md:12,lg:6,children:(0,i.jsx)(m.Z,{children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(p.Z,{children:(0,i.jsx)(v.Z,{component:"h1",sx:{fontWeight:700},variant:"h5",children:"Profile"})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)("form",{onSubmit:o(q),className:W.form,children:(0,i.jsxs)(h.Z,{children:[(0,i.jsx)(p.Z,{children:(0,i.jsx)(P.Qr,{name:"name",control:l,defaultValue:"",rules:{required:!0,minLength:2},render:function(e){var r=e.field;return(0,i.jsx)(x.Z,O({variant:"outlined",fullWidth:!0,disabled:!0,id:"name",label:"Name",inputProps:{type:"name"},error:Boolean(y.name),helperText:y.name?"minLength"===y.name.type?"Name length is more than 1":"Name is required":""},r))}})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(P.Qr,{name:"email",control:l,defaultValue:"",rules:{required:!0,pattern:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/},render:function(e){var r=e.field;return(0,i.jsx)(x.Z,O({variant:"outlined",fullWidth:!0,id:"email",label:"Email",inputProps:{type:"email"},error:Boolean(y.email),helperText:y.email?"pattern"===y.email.type?"Email is not valid":"Email is required":""},r))}})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(P.Qr,{name:"password",control:l,defaultValue:"",rules:{validate:function(e){return""===e||e.length>5||"Password length is more than 5"}},render:function(e){var r=e.field;return(0,i.jsx)(x.Z,O({variant:"outlined",fullWidth:!0,id:"password",label:"Password",inputProps:{type:"password"},error:Boolean(y.password),helperText:y.password?"Password length is more than 5":""},r))}})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(P.Qr,{name:"confirmPassword",control:l,defaultValue:"",rules:{validate:function(e){return""===e||e.length>5||"Confirm Password length is more than 5"}},render:function(e){var r=e.field;return(0,i.jsx)(x.Z,O({variant:"outlined",fullWidth:!0,id:"confirmPassword",label:"Confirm Password",inputProps:{type:"password"},error:Boolean(y.confirmPassword),helperText:y.password?"Confirm Password length is more than 5":""},r))}})}),(0,i.jsx)(p.Z,{children:(0,i.jsx)(w.Z,{variant:"contained",type:"submit",fullWidth:!0,color:"primary",children:"Update"})})]})})})]})})}),(0,i.jsx)(f.Z,{item:!0,md:0,lg:6,children:(0,i.jsx)(c.default,{width:500,height:270,src:"/client-logo.png",alt:"Client Logo"})})]})})}r.default=(0,l.default)((function(){return Promise.resolve(N)}),{ssr:!1})},19629:function(e,r,n){"use strict";var t=(0,n(41120).Z)({textField:{width:"90%",marginLeft:"auto",marginRight:"auto",color:"white",paddingBottom:0,marginTop:0,fontWeight:500},error:{color:"#f04040"}});r.Z=t}},function(e){e.O(0,[774,26,3,669,536,938,776,888,179],(function(){return r=31993,e(e.s=r);var r}));var r=e.O();_N_E=r}]);